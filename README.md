# Countdown

<h5>HTML/CSS/Bootstrap/JavaScript</h5>
<h5>Полнофункциональный таймер обратного отсчета с подписями, которые изменяются в правильном падеже</h5>
Популярный элемент в лендингах и рекламных блоках.<br>
Непосредственно таймер обратного отсчета имеет довольно простую логику, основанную на вычислении разницы времени в мс между установленной датой и текущим временем с последующим "разделением" этого значения на секции с секундами, минутами, часами и при необходимости днями. Однако, в русском языке есть падежи, и подписи к секции должны изменяться соотвественно: "1 час", "2 часа", "14 часов". Необходимость учесть этот момент потребовала добавить некоторое количество строк кода. Но результат - идеально правильный, понятный пользователю таймер!
<hr>

<ul>
  <li>Без JQuery, без CDN, написан на чистом JavaScript.</li>
  <li>Дату/время окончания обратного отсчета легко можно изменить</li>
  <li>Можно модифицировать код таким образом, чтобы отображать только часы, минуты и секунды. Все файлы сопровождаются подробными комментариями, которые помогают разобраться в блоках кода и разметки</li>
  <li>Разметка на Bootstrap grid</li>
  <li>Загруженные подключаемые шрифты</li>
</ul>
<hr>

<h4>1. Устанавливаем дату окончания обратного отсчета в формате гггг-мм-дд</h4><br>
<img width="199" alt="Screenshot 2023-05-24 at 11 07 36" src="https://github.com/polousova/countdown/assets/113363158/03227585-e556-4cff-91bc-78df075330d8">

<br>

<hr>
<h4>2. Определям переменные в глобальной области видимости</h4>
<ul>
  <li>элементы со страницы с подписями секций</li><br>
  

<img width="365" alt="Screenshot 2023-05-23 at 16 18 42" src="https://github.com/polousova/countdown/assets/113363158/5b660128-526a-4a99-899d-247ea36ead4a"><br>
  <li>4 массива с падежами для каждой секции в отдельности</li><br>
  
  
  <img width="179" alt="Screenshot 2023-05-23 at 16 21 30" src="https://github.com/polousova/countdown/assets/113363158/cd058226-5d83-400e-9f5c-ac2c89074647"><br>

</ul>
<hr>
<h4>3. Записываем функцию, которая вычисляет разницу между временем окончания отсчета и текущим временем</h4> в мс с помощью метода parse - функция getTimeRemaining. Эта функция имеет один параметр - endtime, который в дальнейшем будут использовать и другие функции. Функция getTimeRemaining также вычисляет сколько целых дней, часов, минут содержится в этой разнице, и остаток секунд.<br>
  
  <img width="632" alt="Screenshot 2023-05-23 at 16 39 29" src="https://github.com/polousova/countdown/assets/113363158/4c5925d0-465b-473e-8ede-66657ccb6824"><br>
  
  ✦ Если не нужны дни, следует заменить формулу расчета часов на (раскомментировать строку): <br>
  
  <img width="285" alt="Screenshot 2023-05-24 at 11 03 23" src="https://github.com/polousova/countdown/assets/113363158/3c8cdb56-83c8-4550-a3ba-690c0189472b"><br>

И соответственно нужно будет скорректировать код, удалив лишние участки кода, связанные с днями. А также скорректировать верстку, удалив span с днями и их подписями.<br>

  Вернем результат вычисления и запишем их в объект: <br>
  
  
 <img width="202" alt="Screenshot 2023-05-23 at 16 40 39" src="https://github.com/polousova/countdown/assets/113363158/d95a26df-82a1-4572-b32d-7e32c0d64643"><br>
 <hr>
 <h4>4. Теперь нам нужно вставить полученные дни, часы, минуты и секунды в верстку</h4> И сделать это динамически с обновлением каждые 100 мс (1с). За это отвечает функция setClock, которая имеет 2 параметра: id и все тот же endtime.<br> Запишем в локальные переменные участвующие DOM элементы и функцию, обновляющую таймер: <br>
 
 
<img width="431" alt="Screenshot 2023-05-23 at 16 52 18" src="https://github.com/polousova/countdown/assets/113363158/87310c67-e625-4643-923d-6940b9af3844"><br>

Внутри функции setClock - функция UpdateClock, которая обрабатывает результат вычисления функции getTimeRemaining и с помощью метода textContent вставляет дни в поле для дней, часы в поле для часов и тд. <br> Функция addZero добавляет "0" к отображемому числу, если результат вычисления от 0 до 9. <br>И если таймер истек, необходимо отобразить 00 во всех секциях. <br> 

<img width="496" alt="Screenshot 2023-05-23 at 17 07 30" src="https://github.com/polousova/countdown/assets/113363158/8f7d6532-7b9f-4ac4-92e4-c71331d3c7cb"><br>
Сразу же вызываем функцию setClock, передав ей в качестве аргументов id того элемента HTML, в который вставляем таймер, и время окончания отсчета: <br>

<img width="213" alt="Screenshot 2023-05-23 at 17 14 40" src="https://github.com/polousova/countdown/assets/113363158/20fc4538-128b-443b-b79c-f9c5905b4af9"><br>
<hr>
<h4>5. Теперь займемся подписями и их падежами.</h4>
Запишем функцию timerLabelSetup, которая будет работать с массивами, содержащими падежи, которые мы определили в самом начале. <br>
<img width="623" alt="Screenshot 2023-05-23 at 17 16 52" src="https://github.com/polousova/countdown/assets/113363158/2f96a533-0860-4079-8f46-e8b206fef3b2"><br>

Функция timerLabelSetup определяет в какую группу по падежному окончанию относится та или иная цифра из возможных в таймере. Функция принимает 3 аргумента:
<ul>
  <li>timeData<br>  задаем ту переменную времени, для какой секции мы определяем подпись - seconds, minutes, hours, days. Эти переменные у нас уже есть - их возвращает функция getTimeRemaining.</li>
  <li>stringData<br> задаем к какому массиву с падежными формами мы обращаемся - к массиву секунд, минут, часов или дней. Эти массивы мы записали в самом начале - secondsString, minutesString, hoursString, daysString.</li>
  <li>labelData<br> задаем в какой элемент HTML надо вставить предыдущие 2 переменные - единицу времени и подпись в соответствующем падеже</li>
</ul><br>

<hr>
<h4>6. Вызовем функцию timerLabelSetup отдельно для секунд, минут, часов и дней, передав ей соответствующие аргументы:</h4>
Вызывать функцию необходимо внутри функции getTimeRemaining, поскольку временные функции seconds, minutes, hours, days заданы в локальной области видимости.<br>


<img width="402" alt="Screenshot 2023-05-24 at 10 48 49" src="https://github.com/polousova/countdown/assets/113363158/266e7008-fafc-48b3-9079-f781ab066e08"><br>
<hr>
<h4>7. Последний штрих</h4>
Сейчас вы можете заметить небольшую задержку при появлении таймера. Это происходит из-за срабатывания задержки setInterval. Чтобы это поправить, вызовем функцию updatelock однократно внутри функции setClock:<br>

<img width="568" alt="Screenshot 2023-05-24 at 10 58 05" src="https://github.com/polousova/countdown/assets/113363158/7065fe6c-1384-450a-87d5-cd8f121631b5"><br>

Всё! Таймер обратного отсчета готов!
